(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(16),c=n.n(r),a=n(3),u=(n(21),n(2)),o=n(4),i=n.n(o),s="/api/people",l={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},deleteEntry:function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))}},d=n(0),f=function(e){var t=e.field;return Object(d.jsxs)("div",{children:["".concat(t.title,": "),Object(d.jsx)("input",{value:t.value,onChange:t.changeHandler})]})},b=function(e){var t=e.submitHandler,n=e.fields;return Object(d.jsxs)("form",{onSubmit:t,children:[n.map((function(e){return Object(d.jsx)(f,{field:e},e.id)})),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.persons,n=e.deleteEntryOf;return Object(d.jsx)("ul",{children:t.map((function(e){return Object(d.jsxs)("li",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:function(){return n(e.id)},children:"Delete"})]},e.id)}))})},h=function(e){var t=e.message,n=e.messageType;return null===t?null:Object(d.jsx)("div",{className:n,children:t})},m=function(){var e=Object(u.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(u.useState)(""),o=Object(a.a)(c,2),i=o[0],s=o[1],m=Object(u.useState)(""),O=Object(a.a)(m,2),p=O[0],v=O[1],x=Object(u.useState)(""),g=Object(a.a)(x,2),y=g[0],w=g[1],k=Object(u.useState)(""),S=Object(a.a)(k,2),E=S[0],H=S[1],C=Object(u.useState)(""),T=Object(a.a)(C,2),D=T[0],A=T[1];Object(u.useEffect)((function(){l.getAll().then((function(e){return r(e)}))}),[]);var J=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(y.toLowerCase())})),L=function(e,t){H(e),A(t),setTimeout((function(){H(null)}),3e3)},B=[{id:1,title:"name",value:i,changeHandler:function(e){s(e.target.value)}},{id:2,title:"number",value:p,changeHandler:function(e){v(e.target.value)}}],I={title:"Search",value:y,changeHandler:function(e){w(e.target.value)}};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(h,{message:E,messageType:D}),Object(d.jsx)(b,{submitHandler:function(e){if(e.preventDefault(),n.some((function(e){return e.name===i}))){var t=n.find((function(e){return e.name===i}));if(t.number===p)return void alert("".concat(i," has already been added to the phonebook"));if(!window.confirm("".concat(i," is already in the phonebook, would you like to replace their old one with the new one?")))return;var c={name:i,number:p};l.update(t.id,c).then((function(e){r(n.map((function(t){return t.id===e.id?e:t}))),H("".concat(e.name,"'s number updated")),A("success"),setTimeout((function(){H(null)}),3e3),s(""),v("")})).catch((function(e){var t=e.response.data.error;L(t,"error")}))}else{var a={name:i,number:p};l.create(a).then((function(e){r(n.concat(e)),H("".concat(e.name," successfully added")),A("success"),setTimeout((function(){H(null)}),3e3),s(""),v("")})).catch((function(e){var t=e.response.data.error;L(t,"error")}))}},fields:B}),Object(d.jsx)("h2",{children:"Contacts"}),Object(d.jsx)(f,{field:I}),Object(d.jsx)(j,{persons:J,deleteEntryOf:function(e){window.confirm("Delete ".concat(n.find((function(t){return t.id===e})).name,"?"))&&l.deleteEntry(e).then((function(){r(n.filter((function(t){return t.id!==e})))})).catch((function(e){var t=e.response.data.error;L(t,"error")}))}})]})};c.a.render(Object(d.jsx)(m,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.5b8bb98c.chunk.js.map