(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(11),r=n.n(c),a=n(6),i=(n(43),n(0)),o=n(38),u=n(14),s=n.n(u),d="/api/contacts",l={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},deleteEntry:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return s.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},j=n(12),b=n(70),h=n(34),f=n(17),O=n(1),m=function(e){var t=e.field;return Object(O.jsxs)(j.a.Group,{children:[Object(O.jsxs)(j.a.Label,{children:[" ",t.title," "]}),Object(O.jsx)(j.a.Control,{type:t.type,placeholder:t.placeholder,value:t.value,onChange:t.changeHandler})]})},p=function(e){var t=e.submitHandler,n=e.fields;return Object(O.jsxs)(j.a,{onSubmit:t,children:[Object(O.jsxs)(b.a,{children:[Object(O.jsx)(h.a,{children:Object(O.jsx)(m,{field:n.name})}),Object(O.jsx)(h.a,{children:Object(O.jsx)(m,{field:n.number})})]}),Object(O.jsx)(f.a,{type:"submit",children:"Add"})]})},x=n(71),v=function(e){var t=e.persons,n=e.deleteEntryOf;return Object(O.jsxs)(x.a,{striped:!0,bordered:!0,hover:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Number"}),Object(O.jsx)("th",{children:"Actions"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.name}),Object(O.jsxs)("td",{children:[e.number," "]}),Object(O.jsx)("td",{children:Object(O.jsxs)(f.a,{variant:"outline-danger",size:"sm",onClick:function(){return n(e.id)},children:[Object(O.jsx)("i",{className:"bi bi-x"}),"Delete"]})})]},e.id)}))})]})},g=n(72),y=function(e){var t=e.message,n=e.messageType;return null===t?null:Object(O.jsx)(g.a,{variant:n,children:t})},w=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(""),u=Object(a.a)(r,2),s=u[0],d=u[1],j=Object(i.useState)(""),b=Object(a.a)(j,2),h=b[0],f=b[1],x=Object(i.useState)(""),g=Object(a.a)(x,2),w=g[0],k=g[1],E=Object(i.useState)(null),S=Object(a.a)(E,2),C=S[0],N=S[1],H=Object(i.useState)(""),A=Object(a.a)(H,2),D=A[0],L=A[1];Object(i.useEffect)((function(){l.getAll().then((function(e){return c(e)}))}),[]);var T=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(w.toLowerCase())})),J=function(e,t){N(e),L(t),setTimeout((function(){N(null)}),3e3)},P={name:{id:1,title:"Name",value:s,changeHandler:function(e){d(e.target.value)},type:"text",placeholder:"Enter Contact Name"},number:{id:2,title:"Number",value:h,changeHandler:function(e){f(e.target.value)},type:"text",placeholder:"Enter Phone Number"}},z={title:"Search",value:w,changeHandler:function(e){k(e.target.value)},type:"text"};return Object(O.jsxs)(o.a,{children:[Object(O.jsx)("h2",{children:"Phonebook"}),Object(O.jsx)(y,{message:C,messageType:D}),Object(O.jsx)(p,{submitHandler:function(e){if(e.preventDefault(),n.some((function(e){return e.name===s}))){var t=n.find((function(e){return e.name===s}));if(t.number===h)return void alert("".concat(s," has already been added to the phonebook"));if(!window.confirm("".concat(s," is already in the phonebook, would you like to replace their old one with the new one?")))return;var r={name:s,number:h};l.update(t.id,r).then((function(e){c(n.map((function(t){return t.id===e.id?e:t})));var t="".concat(e.name,"'s number updated");J(t,"success"),d(""),f("")})).catch((function(e){var t=e.response.data.error;J(t,"danger")}))}else{var a={name:s,number:h};l.create(a).then((function(e){c(n.concat(e));var t="".concat(e.name," successfully added");J(t,"success"),d(""),f("")})).catch((function(e){var t=e.response.data.error;J(t,"danger")}))}},fields:P}),Object(O.jsx)("h2",{children:"Contacts"}),Object(O.jsx)(m,{field:z}),Object(O.jsx)(v,{persons:T,deleteEntryOf:function(e){window.confirm("Delete ".concat(n.find((function(t){return t.id===e})).name,"?"))&&l.deleteEntry(e).then((function(){c(n.filter((function(t){return t.id!==e})))})).catch((function(e){var t=e.response.data.error;J(t,"danger")}))}})]})};n(66),n(67);r.a.render(Object(O.jsx)(w,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.797b5c74.chunk.js.map