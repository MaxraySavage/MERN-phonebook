(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{57:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(22),r=n.n(a),c=n(18),s=n.n(c),i=n(23),o=n(7),u=(n(57),n(0)),l=n(14),d=n(6),j=n(51),b=n(19),h=n.n(b),O="/api/contacts",p=null,f={getAll:function(){var e={headers:{Authorization:p}};return h.a.get(O,e).then((function(e){return e.data}))},create:function(e){var t={headers:{Authorization:p}};return h.a.post(O,e,t).then((function(e){return e.data}))},deleteEntry:function(e){var t={headers:{Authorization:p}};return h.a.delete("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},update:function(e,t){var n={headers:{Authorization:p}};return h.a.put("".concat(O,"/").concat(e),t,n).then((function(e){return e.data}))},setToken:function(e){p="bearer ".concat(e)}},x=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/auth",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m={login:x},g=n(17),v=n(88),y=n(46),w=n(16),S=n(1),k=function(e){var t=e.field;return Object(S.jsxs)(g.a.Group,{children:[Object(S.jsxs)(g.a.Label,{children:[" ",t.title," "]}),Object(S.jsx)(g.a.Control,{type:t.type,placeholder:t.placeholder,value:t.value,onChange:t.changeHandler})]})},N=function(e){var t=e.submitHandler,n=e.fields;return Object(S.jsxs)(g.a,{onSubmit:t,children:[Object(S.jsxs)(v.a,{children:[Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:n.name})}),Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:n.number})})]}),Object(S.jsx)(w.a,{type:"submit",children:"Add"})]})},H=n(89),E=function(e){var t=e.persons,n=e.deleteEntryOf,a=Object(d.g)();return Object(S.jsxs)(H.a,{striped:!0,bordered:!0,hover:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Name"}),Object(S.jsx)("th",{children:"Number"}),Object(S.jsx)("th",{children:"Actions"})]})}),Object(S.jsx)("tbody",{children:t.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),Object(S.jsxs)("td",{children:[e.number," "]}),Object(S.jsxs)("td",{children:[Object(S.jsx)(w.a,{variant:"info",size:"sm",onClick:function(){return a.push("/contacts/edit/".concat(e.id))},children:"Edit"}),Object(S.jsxs)(w.a,{variant:"outline-danger",size:"sm",onClick:function(){return n(e.id)},children:[Object(S.jsx)("i",{className:"bi bi-x"}),"Delete"]})]})]},e.id)}))})]})},P=n(90),A=function(e){var t=e.message,n=e.messageType;return null===t?null:Object(S.jsx)(P.a,{variant:n,children:t})},C=function(e){var t=e.submitHandler,n=e.fields,a=Object(d.g)();return Object(S.jsx)("div",{children:Object(S.jsxs)(g.a,{onSubmit:function(e){t(e).then((function(){return a.push("/")}))},children:[Object(S.jsxs)(v.a,{children:[Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:n.username})}),Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:n.password})})]}),Object(S.jsx)(w.a,{type:"submit",children:"Login"}),Object(S.jsx)(w.a,{type:"button",variant:"info",onClick:function(){return a.push("/signup")},children:"Sign Up"})]})})},T=function(e){return function(t){e(t.target.value)}},U=function(e){return h.a.post("/api/users",e).then((function(e){return e.data}))},z=function(){var e=Object(u.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(u.useState)(""),c=Object(o.a)(r,2),s=c[0],i=c[1],l=Object(u.useState)(""),j=Object(o.a)(l,2),b=j[0],h=j[1],O=Object(u.useState)(""),p=Object(o.a)(O,2),f=p[0],x=p[1],m=Object(u.useState)(""),N=Object(o.a)(m,2),H=N[0],E=N[1],P=Object(u.useState)(null),C=Object(o.a)(P,2),z=C[0],D=C[1],L=Object(d.g)(),I={username:{title:"Username",value:n,changeHandler:T(a),type:"text",placeholder:"Enter your user name"},firstName:{title:"First Name",value:s,changeHandler:T(i),type:"text",placeholder:"Enter your user name"},lastName:{title:"Last Name",value:b,changeHandler:T(h),type:"text",placeholder:"Enter your user name"},password:{title:"Password",value:f,changeHandler:T(x),type:"password",placeholder:"Enter your password"},duplicatePassword:{title:"Repeat Password",value:H,changeHandler:T(E),type:"password",placeholder:"Repeat password"}};return Object(S.jsxs)("div",{children:[Object(S.jsxs)(g.a,{onSubmit:function(e){if(e.preventDefault(),f===H){var t={username:n,firstName:s,lastName:b,password:f};U.signup(t).then((function(){return L.push("/login")})).catch((function(e){D(e.response.data.error)}))}else D("Passwords do not match")},children:[Object(S.jsxs)(v.a,{children:[Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:I.username})}),Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:I.firstName})}),Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:I.lastName})})]}),Object(S.jsxs)(v.a,{children:[Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:I.password})}),Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:I.duplicatePassword})})]}),Object(S.jsx)(w.a,{type:"submit",children:"Sign Up"})]}),Object(S.jsx)(A,{message:z,messageType:"danger"})]})},D=function(e){var t=e.persons,n=e.setPersons,a=e.displayMessage,r=e.personService,c=Object(d.g)(),l=Object(d.h)().id,j=t.find((function(e){return e.id===l})),b=Object(u.useState)(j.name),h=Object(o.a)(b,2),O=h[0],p=h[1],f=Object(u.useState)(j.number),x=Object(o.a)(f,2),m=x[0],N=x[1],H={name:{id:1,title:"Name",value:O,changeHandler:T(p),type:"text"},number:{id:2,title:"Number",value:m,changeHandler:T(N),type:"text"}},E=function(){var e=Object(i.a)(s.a.mark((function e(i){var o,u,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),e.prev=1,o={name:O,number:m},e.next=5,r.update(l,o);case 5:u=e.sent,n(t.map((function(e){return e.id===u.id?u:e}))),d="".concat(u.name,"'s number updated"),a(d,"success"),c.push("/contacts"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a(e.t0.response.data.error,"danger");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(g.a,{onSubmit:E,children:[Object(S.jsxs)(v.a,{children:[Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:H.name})}),Object(S.jsx)(y.a,{children:Object(S.jsx)(k,{field:H.number})})]}),Object(S.jsx)(w.a,{type:"submit",children:"Save"})]})},L=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(u.useState)(""),c=Object(o.a)(r,2),b=c[0],h=c[1],O=Object(u.useState)(""),p=Object(o.a)(O,2),x=p[0],g=p[1],v=Object(u.useState)(""),y=Object(o.a)(v,2),w=y[0],H=y[1],P=Object(u.useState)(null),U=Object(o.a)(P,2),L=U[0],I=U[1],J=Object(u.useState)(""),M=Object(o.a)(J,2),R=M[0],B=M[1],F=Object(u.useState)(""),G=Object(o.a)(F,2),W=G[0],q=G[1],K=Object(u.useState)(""),Q=Object(o.a)(K,2),V=Q[0],X=Q[1],Y=Object(u.useState)(null),Z=Object(o.a)(Y,2),$=Z[0],_=Z[1];Object(u.useEffect)((function(){var e=window.localStorage.getItem("loggedPhonebookAppUser");if(e){var t=JSON.parse(e);_(t),f.setToken(t.token)}}),[]),Object(u.useEffect)((function(){f.getAll().then((function(e){return a(e)}))}),[$]);var ee=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(w.toLowerCase())})),te=function(e,t){I(e),B(t),setTimeout((function(){I(null)}),3e3)},ne=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m.login({username:W,password:V});case 4:n=e.sent,window.localStorage.setItem("loggedPhonebookAppUser",JSON.stringify(n)),f.setToken(n.token),_(n),q(""),X(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),te("Wrong Credentials","danger");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),ae={name:{id:1,title:"Name",value:b,changeHandler:function(e){h(e.target.value)},type:"text",placeholder:"Enter Contact Name"},number:{id:2,title:"Number",value:x,changeHandler:function(e){g(e.target.value)},type:"text",placeholder:"Enter Phone Number"}},re={username:{title:"Username",value:W,changeHandler:T(q),type:"text",placeholder:"Enter your user name"},password:{title:"Password",value:V,changeHandler:T(X),type:"password",placeholder:"Enter your password"}},ce={title:"Search",value:w,changeHandler:function(e){H(e.target.value)},type:"text"},se={padding:5};return Object(S.jsxs)(j.a,{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(l.b,{style:se,to:"/",children:"home"}),Object(S.jsx)(l.b,{style:se,to:"/contacts",children:"contacts"}),Object(S.jsx)(l.b,{style:se,to:"/contacts/add",children:"add contacts"}),$&&Object(S.jsxs)("em",{children:[$.username," logged in"]}),$?Object(S.jsx)(l.b,{style:se,to:"/login",onClick:function(){window.localStorage.removeItem("loggedPhonebookAppUser"),_(null),a([])},children:"logout"}):Object(S.jsx)(l.b,{style:se,to:"/login",children:"login"})]}),Object(S.jsx)(A,{message:L,messageType:R}),Object(S.jsxs)(d.d,{children:[Object(S.jsx)(d.b,{path:"/signup",children:Object(S.jsx)(z,{})}),Object(S.jsx)(d.b,{path:"/contacts/edit/:id",children:Object(S.jsx)(D,{personService:f,displayMessage:te,persons:n,setPersons:a})}),Object(S.jsxs)(d.b,{path:"/contacts/add",children:[$?null:Object(S.jsx)(d.a,{to:"/login"}),Object(S.jsx)(N,{submitHandler:function(e){e.preventDefault();var t={name:b,number:x};f.create(t).then((function(e){a(n.concat(e));var t="".concat(e.name," successfully added");te(t,"success"),h(""),g("")})).catch((function(e){console.log(e);var t=e.response.data.error;te(t,"danger")}))},fields:ae})]}),Object(S.jsxs)(d.b,{path:"/contacts",children:[$?null:Object(S.jsx)(d.a,{to:"/login"}),Object(S.jsx)("h2",{children:"Contacts"}),Object(S.jsx)(k,{field:ce}),Object(S.jsx)(E,{persons:ee,deleteEntryOf:function(e){window.confirm("Delete ".concat(n.find((function(t){return t.id===e})).name,"?"))&&f.deleteEntry(e).then((function(){a(n.filter((function(t){return t.id!==e})))})).catch((function(e){var t=e.response.data.error;te(t,"danger")}))}})]}),Object(S.jsx)(d.b,{path:"/login",children:Object(S.jsx)(C,{submitHandler:ne,fields:re})}),Object(S.jsx)(d.b,{path:"/",children:$?Object(S.jsx)(d.a,{to:"/contacts"}):Object(S.jsx)(d.a,{to:"/login"})})]})]})};n(84),n(85);r.a.render(Object(S.jsx)(l.a,{children:Object(S.jsx)(L,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.6dacbe22.chunk.js.map